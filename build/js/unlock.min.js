"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"undefined"==typeof window&&console.log("Please be aware that this library is intended for use in the browser."),"function"==typeof define&&define.amd?define(["Unlock"],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.Unlock=t()}("undefined"!=typeof window?window:void 0,function(){function e(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function t(e){var t=this;this.name=e.name,this.callback=e.callback;var n=!1,r=e.code,a="undefined"==typeof e.enabled||e.enabled;this.code=function(){var e="string"==typeof r?r.split(""):r;return e.map(function(e){return i[e]||e}).map(function(e){if(!o[e.toLowerCase()])throw new Error("Unrecognized key: "+e);return o[e.toLowerCase()]})},this.isEnabled=function(){return a},this.enable=function(){return a=!n&&!0},this.disable=function(){return a=!1},this.toggle=function(){return a=!n&&!a},this.trigger=function(){return a&&t.callback()},this.kill=function(){n=!0,a=!1},this.set=function(e,n){switch(e){case"name":throw new Error("Name cannot be changed");case"callback":if("function"!=typeof n)throw new Error("Invalid callback. Expected a function, got "+("undefined"==typeof n?"undefined":_typeof(n)));t.callback=n;break;case"code":if("object"!==("undefined"==typeof n?"undefined":_typeof(n))&&"string"!=typeof n)throw new Error("Invalid callback. Expected an array or string, got "+("undefined"==typeof n?"undefined":_typeof(n)));r=n;break;default:throw new Error("Invalid Setting")}}}function n(e){var t=this,n=/^(-)?([\^+!#]*)([\w\d])$/;this.trigger=e.trigger,this.callback=e.callback,this.selector=e.selector;var r=function(e){var r={},a=void 0;a=window.event?window.event.keyCode:e.keyCode>0?e.keyCode:e.which,console.log("Hotkey:",a);var c={"^":e.ctrlKey,"+":e.shiftKey,"!":e.altKey,"#":e.metaKey},f=t.trigger.match(n),l=f[1],s=f[2],d=f[3];r.default="-"===l,r.meta=s.split(""),r.trigger=d;var u=r.meta.reduce(function(e,t){return e&&c[t]},!0);if(u&&a===o[i[r.trigger]||r.trigger]&&(r.default&&e.preventDefault(),t.callback(),r.default))return!1},a=this.selector?document.querySelector(this.selector):document.body;a.addEventListener("keypress",r)}function r(r){function i(e){var t=void 0;t=window.event?window.event.keyCode:e.keyCode>0?e.keyCode:e.which,console.log("Cheat:",t),clearTimeout(f.timer),f.current.push(t),a(),f.timer=setTimeout(c,d.delay)}function a(){f.cheatCodes.forEach(function(t){e(f.current,t.code())&&(s.trigger(t.name),c())})}function c(){f.current=[]}var f={current:[],timer:null,cheatCodes:[],hotKeys:[]},l=!0,s=this,d=_extends({delay:500},r);this.addCheat=function(){var e={name:"",code:"",callback:!1};if(1===arguments.length){var n=arguments[0];if("object"!==("undefined"==typeof n?"undefined":_typeof(n)))throw new Error("Expected object, got "+_typeof(arguments[0]));e=n}else for(var r=0;r<arguments.length;r++)switch(_typeof(arguments[r])){case"string":e.name=e.name||arguments[r];break;case"object":e.code=e.code||arguments[r];break;case"function":e.callback=e.callback||arguments[r]}if(this.find(e.name))throw new Error("Cheat already exists with name "+e.name);if(!e.code||"object"!==_typeof(e.code)&&"string"!=typeof e.code)throw new Error('Missing or invalid "code" property');if(!e.callback||"function"!=typeof e.callback)throw new Error("Missing or invalid cheat code function");if(!e.name||"string"!=typeof e.name)throw new Error("Invalid name");return e=new t(e),f.cheatCodes.push(e),e},this.addHotkey=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o={trigger:"",selector:"",callback:!1};switch(t.length){case 1:if("object"!==_typeof(t[0]))throw new Error("Expected object, got "+_typeof(arguments[0]));_extends(o,t[0]);break;case 2:o.trigger=t[0],o.callback=t[1];break;default:o.trigger=t[0],o.selector=t[1],o.callback=t[2]}if("string"!=typeof o.trigger)throw new Error("Missing or invalid trigger");if(o.selector&&"string"!=typeof o.selector)throw new Error("Invalid selector");if(!o.callback||"function"!=typeof o.callback)throw new Error("Missing or invalid callback");return o=new n(o),f.hotKeys.push(o),o},this.settings=function(e){_extends(d,e)},this.find=function(e){return f.cheatCodes.filter(function(t){return t.name===e})[0]},this.reset=function(){f.cheatCodes.forEach(function(e){return e.kill()}),f.cheatCodes.length=0},this.enable=function(e){if(e){var t=this.find(e);t.enable()}else l=!0},this.disable=function(e){if(e){var t=this.find(e);t.disable()}else l=!1},this.toggle=function(e){if(e){var t=this.find(e);t.toggle()}else l=!l},this.trigger=function(e){var t=this.find(e);l&&t.trigger()},document.addEventListener("keypress",i),this._data={keyMap:o,arraysMatch:e}}var o=function(){for(var e={tab:9,up:38,down:40,left:37,right:39,enter:13,space:32," ":32,shift:16,ctrl:17,alt:18,win:91,backspace:8,capsLock:20,",":188,".":190,"/":191,"\\":220,esc:27},t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=0;n<t.length;n++)e[t[n]]=n+97;for(var r=0;r<=9;r++)e[r]=r+48;for(var o=0;o<=9;o++)e["pad"+o]=o+96;return e}(),i={U:"up",D:"down",L:"left",R:"right",X:"esc",_:"tab","^":"ctrl","+":"shift","!":"alt","#":"win","<":"backspace",">":"enter"};return r});