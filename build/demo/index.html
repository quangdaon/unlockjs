<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>UnlockJS Demo</title>
		<script type="text/javascript" src="../js/unlock.js"></script>
		<script type="text/javascript" src="index.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/github.min.css">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
		<link rel="stylesheet" href="./main.css">
	</head>

	<body>

		<div id="game">
			<table>
				<tbody>
					<tr>
						<td>Name</td>
						<td id="name"></td>
					</tr>
					<tr>
						<td>Lives</td>
						<td id="lives"></td>
					</tr>
					<tr>
						<td>Strength</td>
						<td id="strength"></td>
					</tr>
					<tr>
						<td>Defense</td>
						<td id="defense"></td>
					</tr>
					<tr>
						<td>Magic</td>
						<td id="magic"></td>
					</tr>
					<tr>
						<td>Speed</td>
						<td id="speed"></td>
					</tr>
				</tbody>
			</table>
			<button id="attack">Attack!</button>
		</div>

		<div id="demo">
			<h1>UnlockJS Demo</h1>
			<h3>Use keyboard keys to their fullest potential!</h3>
			<hr>
			<p>
				UnlockJS is a JavaScript library that extends the interactive between the keyboard and the browser. It was originally created as a way to implement cheat codes on my website, <a
					href="https://www.quangdao.com">quangdao.com</a> and originated from a script I wrote in high school before I knew libraries were a thing.
			</p>
			<p>
				To get started, let's create a new game controller and initiate a demo game <i>Note: Not part of library</i>. Pay attention when a cheat updates any of those values.
			</p>
			<script>
				var game = new GameController({
					name: 'Player',
					lives: 3,
					strength: 10,
					defense: 10,
					magic: 10,
					speed: 10
				});

				document.getElementById('attack').addEventListener('click', game.attack);
			</script>
			<p>
				Of course, let's start off with with the Contra Code, or as it's more widely known, the Konami Code. This classic first appeared in the NES title <i>Gradius</i>, but was popularized by <i>Contra</i>. In that game, a player can input the code, <code>&uarr;&uarr;&darr;&darr;&larr;&rarr;&larr;&rarr;BA</code> in the title screen to start the game with 10 times as many lives.
			</p>
			<script>
				var unlocker = new Unlock({
					delay: 1000
				});

				var konami = unlocker.addCheat('konami', [ 'up', 'up', 'down', 'down', 'left', 'right', 'left', 'right', 'b', 'a', 'enter' ], function () {
					if ( game.lives > 30 ) alert('You fool!');
					game.lives = 30;
					konami.disable();
				});
			</script>
			<p>
				Unfortunately, the Konami code just gives you extra lives at the start. In an especially difficult game, that may not be enough. The Konami Code cannot be activated in the middle of the level and won't be of any use if you're already down 29 lives right before the boss fight. Luckily, Doom's God Mode can do the trick. First of all, hit the attack button to see that each time your lives go down by one.
			</p>
			<script>
				unlocker.addCheat({
					name: 'godmode',
					code: 'iddqd',
					callback: function () {
						if ( !game.godMode ) { // Just to disable the alert after consecutive uses.
							game.godMode = true;
							alert('GOD MODE ACTIVATE!');
						}
						game.lives += 100;
					}
				});
			</script>
			<p>
				As you can see, the cheat was added using a slightly different method. First off, the data is now passed via an object rather than individual. Outside of being more concise about what each variable represent, this gives you the ability to pass the cheat code as a string. Additionally, since we're not planning to do anything with this cheat, it doesn't need to be assigned to a variable. To activate this cheat, you simply type "iddqd" on your keyboard. This time, you'll notice that outside of gaining 100 lives each time you activate this cheat, your lives also goes down significantly slower! That'll help you survive those tricky levels.
			</p>
			<p>
				While you might be able to indefinitely survive wave after wave of enemies simply by running through them and restoring your lives each time you're running low, by the time you reach the boss, you'll be dealing an infinitesimal amount of damage. Rather than sitting through hour of aimlessly shooting marshmallows at a gigantic imaginary alien, why not create a cheat for that? Better yet, let's enable the developers' debugging mode the alter any of the values you want and introduce UnlockJS's other purpose: hotkeys.
			</p>
			<script>
				unlocker.addCheat({
					name: 'hacker',
					code: 'haX m0de',
					callback: function () {
						alert('Debugging Enabled.');
						unlocker.addHotkey('-^s', function () {
							game.strength = parseInt(prompt('Enter Strength Value:')) || game.strength;
						});

						unlocker.addHotkey('-^d', function () {
							game.defense = parseInt(prompt('Enter Defense Value:')) || game.defense;
						});

						unlocker.addHotkey('-^m', function () {
							game.magic = parseInt(prompt('Enter Magic Value:')) || game.magic;
						});

						unlocker.addHotkey('^b', function () {
							game.speed = parseInt(prompt('Enter Speed Value:')) || game.speed;
						});

						this.disable();
					}
				});
			</script>
			<p>
				You may have attempted to type in the code above and failed to have triggered it. That is because UnlockJS is mostly case sensitive and binds capital letters to other keys. In this case, the capital <i>X</i> represents the Esc key. Therefore, the correct sequence is "H, A, Esc, [space], m, 0, d, and e." The caret represent 'Ctrl' in the hotkey function, so you can use Ctrl+S to activate the Change Strength dialog. If you have attempted to run the change speed command, depending on the browser you are using, you may have noticed a Bookmarks dialog popup. This is because, by default, UnlockJS hotkeys does not disable the key's initial command. To enabled <code>e.preventDefault()</code>, you need to add "-" to the beginning of the trigger string. For more details, please refer to the documentations.
			</p>
			<p>
				Heck, while we're at it, let's assign the space bar as an attack button.
			</p>
			<script>
				unlocker.addHotkey('- ', game.attack);
			</script>
			<p>
				In hindsight, maybe I should have showed you this was enabled before the Konami and God Mode examples...
			</p>
			<pre style="text-align: center;"><code>&lt;!-- Just kidding, the example below is currently broken. --></code></pre>
			<p>
				Finally, this game allows the player to their name at will using this input box:
				<input type="text" id="namechange">
			</p>
			<script>
				unlocker.addHotkey('->', '#namechange', function () {
					game.name = document.getElementById('namechange').value;
				});
			</script>
			<p>
				Notice that this hotkey was passed a selector, meaning it will not work outside of the specified element. Furthermore, the trigger is only the "Enter" key, so a modifier key, such as "Ctrl," is not required.
			</p>
		</div>
	</body>
</html>
