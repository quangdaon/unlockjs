"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"undefined"==typeof window&&console.log("Please be aware that this library is intended for use in the browser."),"function"==typeof define&&define.amd?define(["Unlock"],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.Unlock=t()}("undefined"!=typeof window?window:void 0,function(){function e(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function t(e){var t=this,n=e.name,r=e.callback,a=e.code,f=e.enabled,l=c(this);l("name",n,{writable:!1}),l("callback",{set:function(e){if("function"!=typeof e)throw new Error("Invalid callback. Expected a function, got "+("undefined"==typeof e?"undefined":_typeof(e)));r=e},get:function(){return r}}),l("code",{set:function(e){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"string"!=typeof e)throw new Error("Invalid callback. Expected an array or string, got "+("undefined"==typeof e?"undefined":_typeof(e)));a=e},get:function(){var e="string"==typeof a?a.split(""):a;return e.map(function(e){return i[e]||e}).map(function(e){if(!o[e.toLowerCase()])throw new Error("Unrecognized key: "+e);return o[e.toLowerCase()]})}}),f="undefined"==typeof f||f;var d=!1;l("isEnabled",function(){return f}),l("enable",function(){return f=!d&&!0}),l("disable",function(){return f=!1}),l("toggle",function(){return f=!d&&!f}),l("trigger",function(){return f&&t.callback()}),l("kill",function(){d=!0,f=!1}),this.set=function(e,n){console.warn("Cheat.set() is deprecated. You can just set values using Cheat.property = value."),t[e]=n}}function n(e){function t(e){if(!f)return!0;var t={},c=void 0;c=window.event?window.event.keyCode:e.keyCode>0?e.keyCode:e.which;var a={"^":e.ctrlKey,"+":e.shiftKey,"!":e.altKey,"#":e.metaKey},l=n.match(d),u=l[1],s=l[2],g=l[3];t.default="-"===u,t.meta=s.split(""),t.trigger=g;var y=!0;for(var h in a)if(t.meta.indexOf(h)>-1!==a[h]){y=!1;break}return(!y||c!==o[i[t.trigger]||t.trigger]||(t.default&&e.preventDefault(),r(),!t.default))&&void 0}var n=e.trigger,r=e.callback,a=e.selector,f=e.enabled,l=c(this),d=/^(-)?([\^+!#]*)(.)$/,u=void 0;l("trigger",{set:function(e){if(!d.test(e))throw new Error("Invalid trigger. For more information, please refer to the docs.");n=e},get:function(){return n}}),l("callback",{set:function(e){if("function"!=typeof e)throw new Error("Invalid callback. Expected a function, got "+("undefined"==typeof e?"undefined":_typeof(e)));r=e},get:function(){return r}}),l("selector",{set:function(e){if(u&&u.removeEventListener("keypress",t),e)if("string"==typeof e)a=e,u=document.querySelector(e);else{if(!e.nodeType)throw new Error("Invalid Selector. Expected an array or string, got "+("undefined"==typeof e?"undefined":_typeof(e))+".");a=e,u=e}else a=e,u=document.body;try{u.addEventListener("keypress",t)}catch(e){console.warn("Element Not Found.")}},get:function(){return[a,u]}}),this.selector=a,f="undefined"==typeof f||f;var s=!1;l("isEnabled",function(){return f}),l("enable",function(){return f=!s&&!0}),l("disable",function(){return f=!1}),l("toggle",function(){return f=!s&&!f}),l("kill",function(){s=!0,f=!1})}function r(r){function o(e){var t=void 0;t=window.event?window.event.keyCode:e.keyCode>0?e.keyCode:e.which,clearTimeout(d.timer),d.current.push(t),i(),d.timer=setTimeout(a,g.delay)}function i(){d.cheatCodes.forEach(function(t){e(d.current,t.code)&&(s.trigger(t.name),a())})}function a(){d.current=[]}var f=this,l=c(this),d={current:[],timer:null,cheatCodes:[],hotkeys:[]},u=!0,s=this,g=_extends({delay:500},r);l("addCheat",function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o={name:"",code:"",callback:!1};if(1===n.length){var i=n[0];if("object"!==("undefined"==typeof i?"undefined":_typeof(i)))throw new Error("Expected object, got "+_typeof(n[0]));o=i}else for(var c=0;c<n.length;c++)switch(_typeof(n[c])){case"string":o.name=o.name||n[c];break;case"object":o.code=o.code||n[c];break;case"function":o.callback=o.callback||n[c]}if(f.find(o.name))throw new Error("Cheat already exists with name "+o.name);if(!o.code||"object"!==_typeof(o.code)&&"string"!=typeof o.code)throw new Error('Missing or invalid "code" property');if(!o.callback||"function"!=typeof o.callback)throw new Error("Missing or invalid cheat code function");if(!o.name||"string"!=typeof o.name)throw new Error("Invalid name");return o=new t(o),d.cheatCodes.push(o),o}),l("addHotkey",function(){var e={trigger:"",selector:"",callback:!1};switch(arguments.length){case 1:if("object"!==_typeof(arguments.length<=0?void 0:arguments[0]))throw new Error("Expected object, got "+_typeof(arguments.length<=0?void 0:arguments[0]));_extends(e,arguments.length<=0?void 0:arguments[0]);break;case 2:e.trigger=arguments.length<=0?void 0:arguments[0],e.callback=arguments.length<=1?void 0:arguments[1];break;default:e.trigger=arguments.length<=0?void 0:arguments[0],e.selector=arguments.length<=1?void 0:arguments[1],e.callback=arguments.length<=2?void 0:arguments[2]}if("string"!=typeof e.trigger)throw new Error("Missing or invalid trigger");if(!/^(-)?([\^+!#]*)(.)$/.test(e.trigger))throw new Error("Invalid trigger. Please refer to docs");if(e.selector&&"string"!=typeof e.selector)throw new Error("Invalid selector");if(!e.callback||"function"!=typeof e.callback)throw new Error("Missing or invalid callback");return e=new n(e),d.hotkeys.push(e),e}),l("settings",function(e){return _extends(g,e)}),l("find",function(e){return d.cheatCodes.filter(function(t){return t.name===e})[0]}),l("reset",function(){d.cheatCodes.forEach(function(e){return e.kill()}),d.cheatCodes.length=0,d.hotkeys.forEach(function(e){return e.kill()}),d.hotkeys.length=0}),l("enable",function(e){if(e){var t=f.find(e);t.enable()}else u=!0}),l("disable",function(e){if(e){var t=f.find(e);t.disable()}else u=!1}),l("toggle",function(e){if(e){var t=f.find(e);t.toggle()}else u=!u}),l("trigger",function(e){var t=f.find(e);u&&t.trigger()}),document.addEventListener("keypress",o)}var o=function(){for(var e={tab:9,up:38,down:40,left:37,right:39,enter:13,space:32," ":32,shift:16,ctrl:17,alt:18,win:91,backspace:8,capsLock:20,",":188,".":190,"/":191,"\\":220,esc:27},t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=0;n<t.length;n++)e[t[n]]=n+97;for(var r=0;r<=9;r++)e[r]=r+48;for(var o=0;o<=9;o++)e["pad"+o]=o+96;return e}(),i={U:"up",D:"down",L:"left",R:"right",X:"esc",_:"tab","^":"ctrl","+":"shift","!":"alt","#":"win","<":"backspace",">":"enter"},c=function(e){return function(t,n,r){var o={enumerable:!1,configurable:!1};n.get||n.set?r=n:(o.writable="function"!=typeof n||r,o.value=n),_extends(o,r),Object.defineProperty(e,t,o)}};return r});