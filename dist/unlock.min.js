"use strict";var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"undefined"==typeof window&&console.log("Please be aware that this library is intended for use in the browser."),"function"==typeof define&&define.amd?define(["Unlock"],t):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.Unlock=t()}("undefined"!=typeof window?window:void 0,function(){function e(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function t(e){var t=this,n=e.callback,r=e.code;c(this,"name",e.name,{writable:!1}),c(this,"callback",{set:function(e){if("function"!=typeof e)throw new Error("Invalid callback. Expected a function, got "+("undefined"==typeof e?"undefined":_typeof(e)));n=e},get:function(){return n}}),c(this,"code",{set:function(e){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"string"!=typeof e)throw new Error("Invalid callback. Expected an array or string, got "+("undefined"==typeof e?"undefined":_typeof(e)));r=e},get:function(){var e="string"==typeof r?r.split(""):r;return e.map(function(e){return i[e]||e}).map(function(e){if(!o[e.toLowerCase()])throw new Error("Unrecognized key: "+e);return o[e.toLowerCase()]})}});var a="undefined"==typeof e.enabled||e.enabled,f=!1;c(this,"isEnabled",function(){return a}),c(this,"enable",function(){return a=!f&&!0}),c(this,"disable",function(){return a=!1}),c(this,"toggle",function(){return a=!f&&!a}),c(this,"trigger",function(){return a&&t.callback()}),c(this,"kill",function(){f=!0,a=!1}),this.set=function(e,n){console.warn("Cheat.set() is deprecated. You can just set values using Cheat.property = value."),t[e]=n}}function n(e){function t(e){var t={},c=void 0;c=window.event?window.event.keyCode:e.keyCode>0?e.keyCode:e.which;var f={"^":e.ctrlKey,"+":e.shiftKey,"!":e.altKey,"#":e.metaKey},s=r.match(n),l=s[1],d=s[2],u=s[3];t.default="-"===l,t.meta=d.split(""),t.trigger=u;var h=t.meta.reduce(function(e,t){return e&&f[t]},!0);if(h&&c===o[i[t.trigger]||t.trigger]&&(t.default&&e.preventDefault(),a(),t.default))return!1}var n=/^(-)?([\^+!#]*)([\w\d])$/,r=e.trigger,a=e.callback,f=e.selector,s=void 0;console.log(r),c(this,"trigger",{set:function(e){if(!n.test(e))throw new Error("Invalid trigger. For more information, please refer to the docs.");r=e},get:function(){return r}}),c(this,"callback",{set:function(e){a=e},get:function(){return a}}),c(this,"selector",{set:function(e){if(s&&s.removeEventListener("keypress",t),e)if("string"==typeof e)f=e,s=document.querySelector(e);else{if(!e.nodeType)throw new Error("Invalid Selector. Expected an array or string, got "+("undefined"==typeof e?"undefined":_typeof(e))+".");f=e,s=e}else f=e,s=document.body;s.addEventListener("keypress",t)},get:function(){return f}}),this.selector=f}function r(r){function o(e){var t=void 0;t=window.event?window.event.keyCode:e.keyCode>0?e.keyCode:e.which,clearTimeout(a.timer),a.current.push(t),i(),a.timer=setTimeout(c,l.delay)}function i(){a.cheatCodes.forEach(function(t){e(a.current,t.code)&&(s.trigger(t.name),c())})}function c(){a.current=[]}var a={current:[],timer:null,cheatCodes:[],hotkeys:[]},f=!0,s=this,l=_extends({delay:500},r);this.addCheat=function(){var e={name:"",code:"",callback:!1};if(1===arguments.length){var n=arguments[0];if("object"!==("undefined"==typeof n?"undefined":_typeof(n)))throw new Error("Expected object, got "+_typeof(arguments[0]));e=n}else for(var r=0;r<arguments.length;r++)switch(_typeof(arguments[r])){case"string":e.name=e.name||arguments[r];break;case"object":e.code=e.code||arguments[r];break;case"function":e.callback=e.callback||arguments[r]}if(this.find(e.name))throw new Error("Cheat already exists with name "+e.name);if(!e.code||"object"!==_typeof(e.code)&&"string"!=typeof e.code)throw new Error('Missing or invalid "code" property');if(!e.callback||"function"!=typeof e.callback)throw new Error("Missing or invalid cheat code function");if(!e.name||"string"!=typeof e.name)throw new Error("Invalid name");return e=new t(e),a.cheatCodes.push(e),e},this.addHotkey=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o={trigger:"",selector:"",callback:!1};switch(t.length){case 1:if("object"!==_typeof(t[0]))throw new Error("Expected object, got "+_typeof(arguments[0]));_extends(o,t[0]);break;case 2:o.trigger=t[0],o.callback=t[1];break;default:o.trigger=t[0],o.selector=t[1],o.callback=t[2]}if("string"!=typeof o.trigger)throw new Error("Missing or invalid trigger");if(!/^(-)?([\^+!#]*)([\w\d])$/.test(o.trigger))throw new Error("Invalid trigger. Please refer to docs");if(o.selector&&"string"!=typeof o.selector)throw new Error("Invalid selector");if(!o.callback||"function"!=typeof o.callback)throw new Error("Missing or invalid callback");return o=new n(o),a.hotkeys.push(o),o},this.settings=function(e){_extends(l,e)},this.find=function(e){return a.cheatCodes.filter(function(t){return t.name===e})[0]},this.reset=function(){a.cheatCodes.forEach(function(e){return e.kill()}),a.cheatCodes.length=0},this.enable=function(e){if(e){var t=this.find(e);t.enable()}else f=!0},this.disable=function(e){if(e){var t=this.find(e);t.disable()}else f=!1},this.toggle=function(e){if(e){var t=this.find(e);t.toggle()}else f=!f},this.trigger=function(e){var t=this.find(e);f&&t.trigger()},document.addEventListener("keypress",o)}var o=function(){for(var e={tab:9,up:38,down:40,left:37,right:39,enter:13,space:32," ":32,shift:16,ctrl:17,alt:18,win:91,backspace:8,capsLock:20,",":188,".":190,"/":191,"\\":220,esc:27},t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=0;n<t.length;n++)e[t[n]]=n+97;for(var r=0;r<=9;r++)e[r]=r+48;for(var o=0;o<=9;o++)e["pad"+o]=o+96;return e}(),i={U:"up",D:"down",L:"left",R:"right",X:"esc",_:"tab","^":"ctrl","+":"shift","!":"alt","#":"win","<":"backspace",">":"enter"},c=function(e,t,n,r){var o={enumerable:!1,configurable:!1};n.get||n.set?r=n:"function"!=typeof n||r?(o.writable=!0,o.value=n):o.get=function(){return n},_extends(o,r),Object.defineProperty(e,t,o)};return r});